<svg xmlns="http://www.w3.org/2000/svg" (mouseenter)="hovered=true" (mouseleave)="hovered=false"
 class="card" [attr.width]="x() + padding" [attr.height]="y() + padding">

  <defs>

    <filter id="attackGlow" height="300%" width="300%" x="-75%" y="-75%">
      <!-- Thicken out the original shape -->
      <feMorphology operator="dilate" radius="2" in="SourceAlpha" result="thicken" />

      <!-- Use a gaussian blur to create the soft blurriness of the glow -->
      <feGaussianBlur in="thicken" stdDeviation="4" result="blurred" />

      <!-- Change the colour -->
      <feFlood flood-color="rgb(255,130,130)" result="glowColor" />

      <!-- Color in the glows -->
      <feComposite in="glowColor" in2="blurred" operator="in" result="softGlow_colored" />

      <!--	Layer the effects together -->
      <feMerge>
        <feMergeNode in="softGlow_colored" />
        <feMergeNode in="SourceGraphic" />
      </feMerge>

    </filter>

  </defs>

  <rect *ngIf="card.isAttacking()" class="image-border" [attr.x]="padding/2" [attr.y]="padding/2" fill="white" [attr.width]="x()" [attr.height]="y()" filter="url(#attackGlow)" />
  <rect *ngIf="!card.isAttacking()" class="image-border" [attr.x]="padding/2" [attr.y]="padding/2" fill="white" [attr.width]="x()" [attr.height]="y()"/>

  <g attr.transform="translate({{padding/2}} {{padding/2}})">
    <g>
      <text y="18.5" x="7.5">{{card.name}}</text>
      <text y="18.5" [attr.x]="x() - 7.5" text-anchor="end">{{card.cost.asCost()}}</text>
    </g>

    <g attr.transform="translate(0 {{y() * 0.15}})">
      <rect [attr.width]="x()" [attr.height]="y() * 0.4" class="image-border" />
    </g>

    <g attr.transform="translate(0 {{y() * 0.55}})">
      <rect [attr.width]="x()" [attr.height]="y() * 0.45" class="image-border" />
    </g>

    <foreignObject x="0" [attr.y]="y() * 0.55" [attr.width]="x()" [attr.height]="y() * 0.45">
      <xhtml:p xmlns="http://www.w3.org/1999/xhtml">
        {{card.getText()}}
      </xhtml:p>
    </foreignObject>

    <g attr.transform="translate(0 {{y() - 25}})" *ngIf="card.isUnit()">
      <g>
        <rect width="25" height="25" class="image-border" />
        <text width="25" height="25" text-anchor="middle" y="17.5" x="12.5">{{card.damage}}</text>
      </g>

      <g attr.transform="translate({{x() - 25}} 0)">
        <rect width="25" height="25" class="image-border" />
        <text width="25" height="25" text-anchor="middle" y="17.5" x="12.5">{{card.life}}</text>
      </g>
    </g>
  </g>
</svg>

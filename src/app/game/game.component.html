<ccg-record-bar [playerNo]="playerNo" [game]="game"></ccg-record-bar>
<div class="game-area">
  <div class="info-bar">
    <p class="info-text">{{client.getOpponentUsername()}} Life: {{enemy.getLife()}} Cards: {{enemy.getHand().length}} Res: {{enemy.resource.asPool()}}</p>
    <button mdTooltipPosition="below" mdTooltip="View enemy crypt." color="primary" class="crypt-button" (click)="viewCrypt(enemyNo)"
      md-mini-fab><md-icon svgIcon="ccg:tombstone"></md-icon></button>
  </div>

  <svg class="overlay">
    <defs>
      <marker id="arrow" markerWidth="10" markerHeight="10" refX="5" refY="3" orient="auto" markerUnits="strokeWidth">
        <path d="M0,0 L0,6 L9,3 z" fill="royalblue" />
      </marker>
    </defs>

    <line *ngFor="let arrow of overlay.getBlockArrows()" [attr.x1]="arrow.x1" [attr.y1]="arrow.y1" [attr.x2]="arrow.x2" [attr.y2]="arrow.y2"
      marker-end="url(#arrow)" stroke="royalblue" stroke-width="5" />
  </svg>

  <!-- Enemy Board -->
  <div class="area">
    <ccg-card scale="1.4" *ngFor="let card of game.getBoard().getPlayerUnits(enemyNo)" [darkened]="card.isExausted()" [card]="card"
      [target]="validTargets.has(card)" (click)="target(card)"></ccg-card>
  </div>

  <!-- Player Board -->
  <div class="area">
    <ccg-card scale="1.4" *ngFor="let card of game.getBoard().getPlayerUnits(playerNo)" [darkened]="card.isExausted()" [card]="card"
      [target]="validTargets.has(card)" [selected]="card == blocker" (click)="activate(card)">
    </ccg-card>
  </div>

  <div class="info-bar">
    <ccg-resource-selector [canPlayResource]="canPlayResource()"></ccg-resource-selector>
    <p class="info-text">{{client.getUsername()}} Life: {{player.getLife()}} Cards: {{player.getHand().length}} Res: {{player.resource.asPool()}}
    </p>

    <button color="primary" mdTooltipPosition="above" mdTooltip="View your crypt." class="crypt-button" (click)="viewCrypt(playerNo)"
      md-mini-fab><md-icon svgIcon="ccg:tombstone"></md-icon></button>

    <!--<ccg-player-avatar></ccg-player-avatar>-->
    <button [disabled]="passDisabled()" md-raised-button color="primary" class="pass-button" (click)="pass()">{{getPassText()}}</button>


  </div>

  <!-- Player Hand -->
  <div class="area">
    <ccg-card scale="1.4" *ngFor="let card of player.hand" [card]="card" [selected]="card == selected" [darkened]="!card.isPlayable(game)"
      (click)="select(card)"></ccg-card>
  </div>
</div>
